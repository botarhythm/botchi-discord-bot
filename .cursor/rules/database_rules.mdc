# データベース操作ルール

## データベース操作における制約

### ⛔️ 禁止操作
- Supabaseの`list_tables`の実行
- 稼働中のテーブル構造の変更
- アクティブセッション中のテーブルクエリ
- インデックスの再構築
- スキーマの変更

### ✅ 許可される操作
- 読み取り専用の状態確認
- バックアップの作成
- 計画的なメンテナンス時の変更

## 安全な操作手順

1. データベース変更が必要な場合:
   - チャットボットを停止
   - 変更を適用
   - テスト実行
   - チャットボットを再起動

2. 状態確認が必要な場合:
   - 読み取り専用レプリカを使用
   - メンテナンスウィンドウ内で実施
   - モニタリングツールを使用

## 注意事項

- 常にこのルールファイルを参照
- データベース操作前に必ず確認
- 不明な場合は操作を中止
- 変更履歴を必ず記録

## 緊急時の対応

1. 即座に操作を中止
2. 管理者に連絡
3. ログを保存
4. インシデントを記録 